# ğŸ¨ å‰ç«¯é–‹ç™¼å®Œæ•´æ¸…å–®

**æ›´æ–°æ—¥æœŸ**: 2025-09-30  
**Phase**: Phase 2 - å‰ç«¯é–‹ç™¼

---

## ğŸ“‹ ç›®éŒ„

1. [æŠ€è¡“æ£§é¸æ“‡](#1-æŠ€è¡“æ£§é¸æ“‡)
2. [å°ˆæ¡ˆçµæ§‹](#2-å°ˆæ¡ˆçµæ§‹)
3. [é é¢æ¸…å–®](#3-é é¢æ¸…å–®)
4. [çµ„ä»¶æ¸…å–®](#4-çµ„ä»¶æ¸…å–®)
5. [API æ•´åˆ](#5-api-æ•´åˆ)
6. [ç‹€æ…‹ç®¡ç†](#6-ç‹€æ…‹ç®¡ç†)
7. [è·¯ç”±è¨­è¨ˆ](#7-è·¯ç”±è¨­è¨ˆ)
8. [é–‹ç™¼å„ªå…ˆé †åº](#8-é–‹ç™¼å„ªå…ˆé †åº)

---

## 1. æŠ€è¡“æ£§é¸æ“‡

### æ–¹æ¡ˆ A: Next.js + Reactï¼ˆæ¨è–¦ï¼‰

```json
{
  "framework": "Next.js 14",
  "ui-library": "React 18",
  "styling": "Tailwind CSS 3",
  "state": "Zustand / React Query",
  "forms": "React Hook Form + Zod",
  "maps": "Leaflet / Google Maps",
  "icons": "Lucide React",
  "http": "Axios",
  "date": "date-fns"
}
```

**å„ªé»**:
- âœ… SSR/SSG æ”¯æ´
- âœ… å…§å»ºè·¯ç”±
- âœ… API Routes
- âœ… åœ–ç‰‡å„ªåŒ–
- âœ… ç”Ÿæ…‹ç³»çµ±å®Œæ•´

### æ–¹æ¡ˆ B: Vue 3 + Vite

```json
{
  "framework": "Vue 3",
  "build-tool": "Vite",
  "styling": "Tailwind CSS 3",
  "state": "Pinia",
  "router": "Vue Router 4",
  "forms": "VeeValidate + Yup",
  "maps": "Leaflet",
  "icons": "Heroicons",
  "http": "Axios"
}
```

**å„ªé»**:
- âœ… è¼•é‡å¿«é€Ÿ
- âœ… Composition API
- âœ… å­¸ç¿’æ›²ç·šå¹³ç·©

---

## 2. å°ˆæ¡ˆçµæ§‹

### æ¨è–¦çµæ§‹ï¼ˆNext.jsï¼‰

```
frontend/
â”œâ”€â”€ public/                      # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                     # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/              # èªè­‰ç›¸é—œé é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚   â”œâ”€â”€ plan/                # è¡Œç¨‹è¦åŠƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ start/           # åŸºæœ¬è³‡æ–™è¼¸å…¥
â”‚   â”‚   â”‚   â””â”€â”€ result/          # è¡Œç¨‹çµæœ
â”‚   â”‚   â”œâ”€â”€ places/              # æ™¯é»
â”‚   â”‚   â”‚   â””â”€â”€ nearby/
â”‚   â”‚   â”œâ”€â”€ trips/               # æˆ‘çš„è¡Œç¨‹
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”œâ”€â”€ profile/             # å€‹äººè¨­å®š
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx             # é¦–é 
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/              # å¸ƒå±€çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ ui/                  # é€šç”¨ UI çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Loading.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Toast.tsx
â”‚   â”‚   â”œâ”€â”€ auth/                # èªè­‰çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.tsx
â”‚   â”‚   â”œâ”€â”€ trip/                # è¡Œç¨‹çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TripCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TripTimeline.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DaySchedule.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ VisitCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ChatBox.tsx
â”‚   â”‚   â”œâ”€â”€ place/               # æ™¯é»çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ PlaceCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlaceList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlaceMap.tsx
â”‚   â”‚   â”‚   â””â”€â”€ PlaceDetail.tsx
â”‚   â”‚   â””â”€â”€ form/                # è¡¨å–®çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ PlanningForm.tsx
â”‚   â”‚       â”œâ”€â”€ DatePicker.tsx
â”‚   â”‚       â”œâ”€â”€ CategorySelector.tsx
â”‚   â”‚       â””â”€â”€ BudgetSelector.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                     # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ api/                 # API å®¢æˆ¶ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts        # Axios å¯¦ä¾‹
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts          # èªè­‰ API
â”‚   â”‚   â”‚   â”œâ”€â”€ trips.ts         # è¡Œç¨‹ API
â”‚   â”‚   â”‚   â”œâ”€â”€ places.ts        # æ™¯é» API
â”‚   â”‚   â”‚   â””â”€â”€ planning.ts      # è¦åŠƒ API
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts          # Token ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ date.ts          # æ—¥æœŸè™•ç†
â”‚   â”‚   â”‚   â””â”€â”€ format.ts        # æ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ hooks/               # Custom Hooks
â”‚   â”‚       â”œâ”€â”€ useAuth.ts
â”‚   â”‚       â”œâ”€â”€ useTrips.ts
â”‚   â”‚       â””â”€â”€ usePlaces.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                   # ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ authStore.ts         # èªè­‰ç‹€æ…‹
â”‚   â”‚   â”œâ”€â”€ tripStore.ts         # è¡Œç¨‹ç‹€æ…‹
â”‚   â”‚   â””â”€â”€ planningStore.ts     # è¦åŠƒç‹€æ…‹
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # TypeScript é¡å‹
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ trip.ts
â”‚   â”‚   â”œâ”€â”€ place.ts
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”‚
â”‚   â””â”€â”€ styles/                  # å…¨å±€æ¨£å¼
â”‚       â””â”€â”€ globals.css
â”‚
â”œâ”€â”€ .env.local                   # ç’°å¢ƒè®Šæ•¸
â”œâ”€â”€ next.config.js               # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.js           # Tailwind é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â””â”€â”€ package.json                 # ä¾è³´ç®¡ç†
```

---

## 3. é é¢æ¸…å–®

### 3.1 å…¬é–‹é é¢ï¼ˆè¨ªå®¢å¯è¨ªå•ï¼‰

| è·¯ç”± | æª”æ¡ˆä½ç½® | åŠŸèƒ½ | å„ªå…ˆç´š |
|------|---------|------|--------|
| `/` | `app/page.tsx` | é¦–é ï¼ˆHero + åŠŸèƒ½ä»‹ç´¹ï¼‰ | P1 |
| `/login` | `app/(auth)/login/page.tsx` | ç™»å…¥é é¢ | P0 |
| `/register` | `app/(auth)/register/page.tsx` | è¨»å†Šé é¢ | P0 |
| `/plan/start` | `app/plan/start/page.tsx` | è¡Œç¨‹è¦åŠƒ - åŸºæœ¬è³‡æ–™è¼¸å…¥ | P0 |
| `/plan/result` | `app/plan/result/page.tsx` | è¡Œç¨‹è¦åŠƒ - çµæœå±•ç¤º | P0 |
| `/places/nearby` | `app/places/nearby/page.tsx` | é™„è¿‘æ™¯é»æ¨è–¦ | P1 |
| `/trips/public/[token]` | `app/trips/public/[token]/page.tsx` | æŸ¥çœ‹å…¬é–‹è¡Œç¨‹ | P2 |

### 3.2 æœƒå“¡å°ˆå±¬é é¢

| è·¯ç”± | æª”æ¡ˆä½ç½® | åŠŸèƒ½ | å„ªå…ˆç´š |
|------|---------|------|--------|
| `/trips` | `app/trips/page.tsx` | æˆ‘çš„è¡Œç¨‹åˆ—è¡¨ | P0 |
| `/trips/[id]` | `app/trips/[id]/page.tsx` | è¡Œç¨‹è©³æƒ… | P1 |
| `/profile` | `app/profile/page.tsx` | å€‹äººè¨­å®š | P2 |
| `/profile/preferences` | `app/profile/preferences/page.tsx` | åå¥½è¨­å®š | P2 |

**å„ªå…ˆç´šèªªæ˜**:
- P0: æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é ˆå„ªå…ˆé–‹ç™¼
- P1: é‡è¦åŠŸèƒ½ï¼Œç¬¬ä¸€ç‰ˆå®Œæˆ
- P2: è¼”åŠ©åŠŸèƒ½ï¼Œå¾ŒçºŒå„ªåŒ–

---

## 4. çµ„ä»¶æ¸…å–®

### 4.1 å¸ƒå±€çµ„ä»¶ï¼ˆLayoutï¼‰

#### Navbar.tsx - å°è¦½åˆ—
```typescript
åŠŸèƒ½ï¼š
- Logo èˆ‡å“ç‰Œåç¨±
- ä¸»é¸å–®ï¼ˆè¦åŠƒè¡Œç¨‹ã€é™„è¿‘æ™¯é»ã€æˆ‘çš„è¡Œç¨‹ï¼‰
- ä½¿ç”¨è€…é¸å–®ï¼ˆç™»å…¥/è¨»å†Š æˆ– ä½¿ç”¨è€…é ­åƒä¸‹æ‹‰ï¼‰
- éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ‰‹æ©Ÿç‰ˆæ¼¢å ¡é¸å–®ï¼‰

Props:
- user?: User | null
- onLogout?: () => void
```

#### Footer.tsx - é å°¾
```typescript
åŠŸèƒ½ï¼š
- é—œæ–¼æˆ‘å€‘
- éš±ç§æ”¿ç­–
- è¯çµ¡æ–¹å¼
- ç‰ˆæ¬Šè³‡è¨Š
```

#### Sidebar.tsx - å´é‚Šæ¬„ï¼ˆå¯é¸ï¼‰
```typescript
åŠŸèƒ½ï¼š
- æœƒå“¡å°ˆå±¬å´é‚Šé¸å–®
- å¿«é€Ÿå°èˆª
```

### 4.2 é€šç”¨ UI çµ„ä»¶ï¼ˆUIï¼‰

#### Button.tsx - æŒ‰éˆ•
```typescript
Props:
- variant: 'primary' | 'secondary' | 'outline' | 'ghost'
- size: 'sm' | 'md' | 'lg'
- disabled?: boolean
- loading?: boolean
- onClick?: () => void
```

#### Input.tsx - è¼¸å…¥æ¡†
```typescript
Props:
- type: 'text' | 'email' | 'password' | 'number'
- label?: string
- placeholder?: string
- error?: string
- required?: boolean
```

#### Card.tsx - å¡ç‰‡
```typescript
Props:
- title?: string
- children: ReactNode
- className?: string
- hoverable?: boolean
```

#### Modal.tsx - å½ˆçª—
```typescript
Props:
- isOpen: boolean
- onClose: () => void
- title?: string
- children: ReactNode
- size?: 'sm' | 'md' | 'lg' | 'xl'
```

#### Loading.tsx - è¼‰å…¥å‹•ç•«
```typescript
Props:
- size?: 'sm' | 'md' | 'lg'
- fullScreen?: boolean
- message?: string
```

#### Toast.tsx - é€šçŸ¥è¨Šæ¯
```typescript
Props:
- type: 'success' | 'error' | 'warning' | 'info'
- message: string
- duration?: number
- onClose?: () => void
```

#### Select.tsx - ä¸‹æ‹‰é¸å–®
```typescript
Props:
- options: Array<{value: string, label: string}>
- value: string
- onChange: (value: string) => void
- placeholder?: string
```

#### Checkbox.tsx - è¤‡é¸æ¡†
```typescript
Props:
- label: string
- checked: boolean
- onChange: (checked: boolean) => void
```

#### Badge.tsx - æ¨™ç±¤
```typescript
Props:
- text: string
- variant: 'default' | 'success' | 'warning' | 'error'
```

### 4.3 èªè­‰çµ„ä»¶ï¼ˆAuthï¼‰

#### LoginForm.tsx - ç™»å…¥è¡¨å–®
```typescript
åŠŸèƒ½ï¼š
- Email + å¯†ç¢¼è¼¸å…¥
- è¡¨å–®é©—è­‰
- éŒ¯èª¤é¡¯ç¤º
- ã€Œå¿˜è¨˜å¯†ç¢¼ã€é€£çµ
- ã€Œè¨»å†Šã€é€£çµ
- Google OAuth æŒ‰éˆ•ï¼ˆå¯é¸ï¼‰

State:
- email: string
- password: string
- isLoading: boolean
- error: string | null
```

#### RegisterForm.tsx - è¨»å†Šè¡¨å–®
```typescript
åŠŸèƒ½ï¼š
- Emailã€å¯†ç¢¼ã€ä½¿ç”¨è€…åç¨±è¼¸å…¥
- å¯†ç¢¼å¼·åº¦æª¢æŸ¥
- å¯†ç¢¼ç¢ºèª
- è¡¨å–®é©—è­‰
- æœå‹™æ¢æ¬¾åŒæ„

State:
- email: string
- password: string
- confirmPassword: string
- username: string
- agreeToTerms: boolean
```

#### OAuthButton.tsx - OAuth ç™»å…¥æŒ‰éˆ•
```typescript
Props:
- provider: 'google' | 'facebook'
- onSuccess: (token: string) => void
```

### 4.4 è¡Œç¨‹çµ„ä»¶ï¼ˆTripï¼‰

#### TripCard.tsx - è¡Œç¨‹å¡ç‰‡
```typescript
åŠŸèƒ½ï¼š
- é¡¯ç¤ºè¡Œç¨‹æ‘˜è¦ï¼ˆæ¨™é¡Œã€æ—¥æœŸã€å¤©æ•¸ã€æ™¯é»æ•¸ï¼‰
- ç¸®åœ–æˆ–å°é¢åœ–
- æ“ä½œæŒ‰éˆ•ï¼ˆæŸ¥çœ‹ã€ç·¨è¼¯ã€åˆ†äº«ã€åˆªé™¤ï¼‰

Props:
- trip: TripSummary
- onView?: () => void
- onEdit?: () => void
- onShare?: () => void
- onDelete?: () => void
```

#### TripTimeline.tsx - è¡Œç¨‹æ™‚é–“è»¸
```typescript
åŠŸèƒ½ï¼š
- å‚ç›´æ™‚é–“è»¸é¡¯ç¤º
- æ¯æ—¥è¡Œç¨‹å€å¡Š
- æ™¯é»è¨ªå•é †åº
- äº¤é€šæ™‚é–“é¡¯ç¤º
- ä½å®¿è³‡è¨Š

Props:
- itinerary: Itinerary
- editable?: boolean
- onModify?: (dayIndex: number, visitIndex: number) => void
```

#### DaySchedule.tsx - å–®æ—¥è¡Œç¨‹
```typescript
åŠŸèƒ½ï¼š
- æ—¥æœŸæ¨™é¡Œ
- æ™¯é»åˆ—è¡¨
- æ™‚é–“è»¸è¦–è¦ºåŒ–
- ä½å®¿è³‡è¨Š

Props:
- day: Day
- dayNumber: number
```

#### VisitCard.tsx - æ™¯é»è¨ªå•å¡ç‰‡
```typescript
åŠŸèƒ½ï¼š
- æ™¯é»åç¨±ã€åœ–ç‰‡
- åˆ°é”/é›¢é–‹æ™‚é–“
- åœç•™æ™‚é–“
- äº¤é€šæ™‚é–“
- è©•åˆ†ã€åƒ¹æ ¼
- å¿«é€Ÿæ“ä½œï¼ˆåˆªé™¤ã€æ›¿æ›ï¼‰

Props:
- visit: Visit
- place: Place
- onDelete?: () => void
- onReplace?: () => void
```

#### ChatBox.tsx - å°è©±ä¿®æ”¹æ¡†
```typescript
åŠŸèƒ½ï¼š
- å°è©±æ­·å²é¡¯ç¤º
- è¼¸å…¥æ¡†
- ç™¼é€æŒ‰éˆ•
- è¼‰å…¥ç‹€æ…‹
- å¿«é€Ÿæ“ä½œæŒ‰éˆ•

Props:
- messages: Array<{role: 'user' | 'ai', content: string}>
- onSend: (message: string) => void
- isLoading: boolean

State:
- inputValue: string
- messages: Message[]
```

#### ShareModal.tsx - åˆ†äº«å½ˆçª—
```typescript
åŠŸèƒ½ï¼š
- é¡¯ç¤ºåˆ†äº«é€£çµ
- ä¸€éµè¤‡è£½
- QR Code ç”Ÿæˆ
- ç¤¾ç¾¤åˆ†äº«æŒ‰éˆ•

Props:
- shareUrl: string
- onClose: () => void
```

### 4.5 æ™¯é»çµ„ä»¶ï¼ˆPlaceï¼‰

#### PlaceCard.tsx - æ™¯é»å¡ç‰‡
```typescript
åŠŸèƒ½ï¼š
- æ™¯é»åœ–ç‰‡
- åç¨±ã€è©•åˆ†ã€åƒ¹æ ¼
- è·é›¢é¡¯ç¤º
- é¡åˆ¥æ¨™ç±¤
- æ”¶è—æŒ‰éˆ•
- æ“ä½œæŒ‰éˆ•ï¼ˆè©³æƒ…ã€åŠ å…¥è¡Œç¨‹ï¼‰

Props:
- place: Place
- distance?: number
- isFavorite?: boolean
- onFavorite?: () => void
- onViewDetail?: () => void
- onAddToTrip?: () => void
```

#### PlaceList.tsx - æ™¯é»åˆ—è¡¨
```typescript
åŠŸèƒ½ï¼š
- æ™¯é»å¡ç‰‡åˆ—è¡¨
- ç„¡é™æ»¾å‹•æˆ–åˆ†é 
- ç©ºç‹€æ…‹é¡¯ç¤º

Props:
- places: Place[]
- loading?: boolean
- onLoadMore?: () => void
```

#### PlaceMap.tsx - æ™¯é»åœ°åœ–
```typescript
åŠŸèƒ½ï¼š
- äº’å‹•å¼åœ°åœ–ï¼ˆLeafletï¼‰
- æ¨™è¨˜æ™¯é»ä½ç½®
- è·¯ç·šç¹ªè£½
- é»æ“Šé¡¯ç¤ºè³‡è¨Š
- ç¸®æ”¾ã€å¹³ç§»

Props:
- places: Place[]
- userLocation?: {lat: number, lon: number}
- route?: Array<{lat: number, lon: number}>
- onPlaceClick?: (placeId: string) => void
```

#### PlaceDetail.tsx - æ™¯é»è©³æƒ…
```typescript
åŠŸèƒ½ï¼š
- å®Œæ•´æ™¯é»è³‡è¨Š
- åœ–ç‰‡è¼ªæ’­
- è©•åˆ†èˆ‡è©•è«–
- ç‡Ÿæ¥­æ™‚é–“
- åœ°åœ–ä½ç½®
- æ“ä½œæŒ‰éˆ•

Props:
- place: PlaceDetail
- onClose?: () => void
```

#### PlaceFilter.tsx - æ™¯é»ç¯©é¸å™¨
```typescript
åŠŸèƒ½ï¼š
- é¡åˆ¥å¤šé¸
- åŠå¾‘æ»‘æ¡¿
- è©•åˆ†ç¯©é¸
- åƒ¹æ ¼ç¯©é¸
- æ’åºé¸é …

Props:
- filters: FilterState
- onChange: (filters: FilterState) => void
```

### 4.6 è¡¨å–®çµ„ä»¶ï¼ˆFormï¼‰

#### PlanningForm.tsx - è¡Œç¨‹è¦åŠƒè¡¨å–®
```typescript
åŠŸèƒ½ï¼š
- ç›®çš„åœ°é¸æ“‡
- æ—¥æœŸé¸æ“‡å™¨
- å¤©æ•¸é¸æ“‡
- èˆˆè¶£å¤šé¸
- é ç®—é¸æ“‡
- ç¯€å¥é¸æ“‡
- è¡¨å–®é©—è­‰

Props:
- onSubmit: (data: PlanningFormData) => void
- initialData?: PlanningFormData
```

#### DatePicker.tsx - æ—¥æœŸé¸æ“‡å™¨
```typescript
åŠŸèƒ½ï¼š
- æ—¥æ›†è¦–åœ–
- æ—¥æœŸç¯„åœé¸æ“‡
- ç¦ç”¨éå»æ—¥æœŸ

Props:
- value: Date | null
- onChange: (date: Date) => void
- minDate?: Date
```

#### CategorySelector.tsx - é¡åˆ¥é¸æ“‡å™¨
```typescript
åŠŸèƒ½ï¼š
- å¤šé¸èˆˆè¶£é¡åˆ¥
- åœ–ç¤º + æ–‡å­—
- å·²é¸æ¨™è¨˜

Props:
- selected: string[]
- onChange: (categories: string[]) => void
- options: Array<{value: string, label: string, icon: string}>
```

#### BudgetSelector.tsx - é ç®—é¸æ“‡å™¨
```typescript
åŠŸèƒ½ï¼š
- å–®é¸ï¼ˆç¶“æ¿Ÿã€ä¸­ç­‰ã€è±ªè¯ï¼‰
- è¦–è¦ºåŒ–é¡¯ç¤º

Props:
- value: 'budget' | 'moderate' | 'luxury'
- onChange: (value: string) => void
```

#### PaceSelector.tsx - ç¯€å¥é¸æ“‡å™¨
```typescript
åŠŸèƒ½ï¼š
- å–®é¸ï¼ˆæ‚ é–’ã€é©ä¸­ã€ç·Šæ¹Šï¼‰
- èªªæ˜æ–‡å­—

Props:
- value: 'relaxed' | 'moderate' | 'packed'
- onChange: (value: string) => void
```

---

## 5. API æ•´åˆ

### 5.1 API å®¢æˆ¶ç«¯è¨­å®š

#### client.ts - Axios å¯¦ä¾‹
```typescript
åŠŸèƒ½ï¼š
- è¨­å®š baseURL
- è«‹æ±‚æ””æˆªå™¨ï¼ˆè‡ªå‹•åŠ  Tokenï¼‰
- å›æ‡‰æ””æˆªå™¨ï¼ˆè™•ç†éŒ¯èª¤ã€Token åˆ·æ–°ï¼‰
- éŒ¯èª¤è™•ç†

export const apiClient = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
  headers: {
    'Content-Type': 'application/json'
  }
})
```

### 5.2 API å‡½æ•¸æ¸…å–®

#### auth.ts - èªè­‰ API
```typescript
- register(email, password, username)
- login(email, password)
- logout()
- refreshToken(refreshToken)
- getCurrentUser()
- updateProfile(data)
- changePassword(oldPassword, newPassword)
- getPreferences()
- updatePreferences(preferences)
```

#### trips.ts - è¡Œç¨‹ API
```typescript
- saveTrip(tripData)
- getMyTrips(page, pageSize)
- getTripById(tripId)
- updateTrip(tripId, updates)
- deleteTrip(tripId)
- shareTrip(tripId)
- getPublicTrip(shareToken)
- copyTrip(tripId, newTitle)
```

#### places.ts - æ™¯é» API
```typescript
- getNearbyPlaces(lat, lon, radius, filters)
- getPlaceById(placeId)
- getFavorites()
- addFavorite(placeId, notes)
- removeFavorite(placeId)
- searchPlaces(query, filters)
```

#### planning.ts - è¦åŠƒ API
```typescript
- proposeItinerary(sessionId, text)
- submitFeedback(sessionId, itinerary, feedbackText)
- optimizeItinerary(itinerary)
```

---

## 6. ç‹€æ…‹ç®¡ç†

### 6.1 ä½¿ç”¨ Zustandï¼ˆæ¨è–¦ï¼‰

#### authStore.ts - èªè­‰ç‹€æ…‹
```typescript
interface AuthState {
  // ç‹€æ…‹
  user: User | null
  accessToken: string | null
  refreshToken: string | null
  isAuthenticated: boolean
  isLoading: boolean
  
  // æ“ä½œ
  login: (email: string, password: string) => Promise<void>
  register: (email: string, password: string, username: string) => Promise<void>
  logout: () => void
  refreshAccessToken: () => Promise<void>
  loadUser: () => Promise<void>
}
```

#### tripStore.ts - è¡Œç¨‹ç‹€æ…‹
```typescript
interface TripState {
  // ç‹€æ…‹
  trips: Trip[]
  currentTrip: Trip | null
  isLoading: boolean
  
  // æ“ä½œ
  fetchTrips: () => Promise<void>
  saveTrip: (tripData: SaveTripRequest) => Promise<Trip>
  updateTrip: (tripId: string, updates: UpdateTripRequest) => Promise<void>
  deleteTrip: (tripId: string) => Promise<void>
  shareTrip: (tripId: string) => Promise<string>
}
```

#### planningStore.ts - è¦åŠƒç‹€æ…‹
```typescript
interface PlanningState {
  // ç‹€æ…‹
  sessionId: string
  formData: PlanningFormData | null
  itinerary: Itinerary | null
  isGenerating: boolean
  chatHistory: Message[]
  
  // æ“ä½œ
  setFormData: (data: PlanningFormData) => void
  generateItinerary: () => Promise<void>
  sendFeedback: (message: string) => Promise<void>
  clearPlanning: () => void
}
```

---

## 7. è·¯ç”±è¨­è¨ˆ

### 7.1 å®Œæ•´è·¯ç”±è¡¨

```typescript
// å…¬é–‹è·¯ç”±
/                           é¦–é 
/login                      ç™»å…¥
/register                   è¨»å†Š
/plan/start                 é–‹å§‹è¦åŠƒ
/plan/result                è¦åŠƒçµæœ
/places/nearby              é™„è¿‘æ™¯é»
/trips/public/:token        å…¬é–‹è¡Œç¨‹

// æœƒå“¡è·¯ç”±ï¼ˆéœ€ç™»å…¥ï¼‰
/trips                      æˆ‘çš„è¡Œç¨‹
/trips/:id                  è¡Œç¨‹è©³æƒ…
/trips/:id/edit             ç·¨è¼¯è¡Œç¨‹
/profile                    å€‹äººè³‡æ–™
/profile/preferences        åå¥½è¨­å®š
/favorites                  æˆ‘çš„æ”¶è—
```

### 7.2 è·¯ç”±å®ˆè¡›

```typescript
// middleware.ts
export function middleware(request: NextRequest) {
  const token = request.cookies.get('access_token')
  
  // æœƒå“¡å°ˆå±¬è·¯ç”±
  const protectedPaths = ['/trips', '/profile', '/favorites']
  
  if (protectedPaths.some(path => request.nextUrl.pathname.startsWith(path))) {
    if (!token) {
      return NextResponse.redirect(new URL('/login', request.url))
    }
  }
  
  return NextResponse.next()
}
```

---

## 8. é–‹ç™¼å„ªå…ˆé †åº

### ğŸ”¥ Week 1: åŸºç¤æ¶æ§‹ï¼ˆP0ï¼‰

#### Day 1-2: å°ˆæ¡ˆè¨­å®š
- [ ] å»ºç«‹ Next.js å°ˆæ¡ˆ
- [ ] å®‰è£ä¾è³´ï¼ˆTailwindã€Axiosã€Zustandï¼‰
- [ ] è¨­å®š TypeScript
- [ ] è¨­å®š Tailwind CSS
- [ ] å»ºç«‹åŸºæœ¬å°ˆæ¡ˆçµæ§‹

#### Day 3-4: é€šç”¨çµ„ä»¶
- [ ] Button, Input, Card, Modal
- [ ] Loading, Toast
- [ ] Navbar, Footer

#### Day 5: API å®¢æˆ¶ç«¯
- [ ] è¨­å®š Axios å¯¦ä¾‹
- [ ] å¯¦ä½œè«‹æ±‚/å›æ‡‰æ””æˆªå™¨
- [ ] å¯¦ä½œ Token è‡ªå‹•åˆ·æ–°
- [ ] å¯¦ä½œéŒ¯èª¤è™•ç†

### ğŸ¯ Week 2: èªè­‰åŠŸèƒ½ï¼ˆP0ï¼‰

#### Day 1-2: èªè­‰é é¢
- [ ] ç™»å…¥é é¢ UI
- [ ] è¨»å†Šé é¢ UI
- [ ] è¡¨å–®é©—è­‰
- [ ] éŒ¯èª¤è™•ç†

#### Day 3-4: èªè­‰ç‹€æ…‹ç®¡ç†
- [ ] authStore å¯¦ä½œ
- [ ] Token ç®¡ç†
- [ ] è‡ªå‹•ç™»å…¥ï¼ˆToken å­˜åœ¨ï¼‰
- [ ] è·¯ç”±å®ˆè¡›

#### Day 5: æ•´åˆæ¸¬è©¦
- [ ] è¨»å†Šæµç¨‹æ¸¬è©¦
- [ ] ç™»å…¥æµç¨‹æ¸¬è©¦
- [ ] Token åˆ·æ–°æ¸¬è©¦

### ğŸ—ºï¸ Week 3: è¡Œç¨‹è¦åŠƒé é¢ï¼ˆP0ï¼‰

#### Day 1-2: é é¢ 1 - åŸºæœ¬è³‡æ–™è¼¸å…¥
- [ ] PlanningForm çµ„ä»¶
- [ ] ç›®çš„åœ°é¸æ“‡å™¨
- [ ] DatePicker
- [ ] CategorySelector
- [ ] BudgetSelector, PaceSelector
- [ ] è¡¨å–®é©—è­‰èˆ‡æäº¤

#### Day 3-5: é é¢ 2 - è¡Œç¨‹çµæœ
- [ ] TripTimeline çµ„ä»¶
- [ ] DaySchedule çµ„ä»¶
- [ ] VisitCard çµ„ä»¶
- [ ] PlaceMap æ•´åˆ
- [ ] ChatBox å°è©±ä»‹é¢
- [ ] å„²å­˜è¡Œç¨‹æŒ‰éˆ•
- [ ] ä¸‹è¼‰è¡Œç¨‹åŠŸèƒ½

### ğŸ“ Week 4: æœƒå“¡åŠŸèƒ½ï¼ˆP0-P1ï¼‰

#### Day 1-2: æˆ‘çš„è¡Œç¨‹é é¢
- [ ] è¡Œç¨‹åˆ—è¡¨ UI
- [ ] TripCard çµ„ä»¶
- [ ] åˆ†é åŠŸèƒ½
- [ ] ç¯©é¸èˆ‡æ’åº
- [ ] ç©ºç‹€æ…‹ UI

#### Day 3-4: è¡Œç¨‹è©³æƒ…èˆ‡æ“ä½œ
- [ ] è¡Œç¨‹è©³æƒ…é é¢
- [ ] ç·¨è¼¯åŠŸèƒ½
- [ ] ShareModal çµ„ä»¶
- [ ] åˆªé™¤ç¢ºèªå°è©±æ¡†
- [ ] è¤‡è£½è¡Œç¨‹åŠŸèƒ½

#### Day 5: å€‹äººè¨­å®š
- [ ] å€‹äººè³‡æ–™ç·¨è¼¯é 
- [ ] åå¥½è¨­å®šé 
- [ ] å¯†ç¢¼ä¿®æ”¹åŠŸèƒ½

### ğŸ“ Week 5-6: æ™¯é»æ¨è–¦ï¼ˆP1ï¼‰

#### Week 5: é™„è¿‘æ™¯é»é é¢
- [ ] åœ°ç†å®šä½åŠŸèƒ½
- [ ] PlaceMap çµ„ä»¶
- [ ] PlaceList çµ„ä»¶
- [ ] PlaceFilter çµ„ä»¶
- [ ] åœ°åœ–+åˆ—è¡¨é›™è¦–åœ–åˆ‡æ›

#### Week 6: æ™¯é»è©³æƒ…èˆ‡æ”¶è—
- [ ] PlaceDetail Modal
- [ ] æ”¶è—åŠŸèƒ½
- [ ] æˆ‘çš„æ”¶è—é é¢
- [ ] åŠ å…¥è¡Œç¨‹åŠŸèƒ½

---

## 9. TypeScript é¡å‹å®šç¾©

### types/auth.ts
```typescript
export interface User {
  id: string
  email: string
  username: string
  provider: string
  is_verified: boolean
  created_at: string
  last_login: string | null
}

export interface UserPreference {
  favorite_themes: string[]
  travel_pace: 'relaxed' | 'moderate' | 'packed'
  budget_level: 'budget' | 'moderate' | 'luxury'
  default_daily_start: string
  default_daily_end: string
}

export interface AuthResponse {
  user: User
  access_token: string
  refresh_token: string
  token_type: string
}

export interface LoginRequest {
  email: string
  password: string
}

export interface RegisterRequest {
  email: string
  password: string
  username?: string
}
```

### types/trip.ts
```typescript
export interface Trip {
  id: string
  user_id: string
  title: string
  description: string | null
  destination: string
  duration_days: number
  start_date: string
  end_date: string
  itinerary_data: Itinerary
  is_public: boolean
  share_token: string | null
  view_count: number
  created_at: string
  updated_at: string
}

export interface TripSummary {
  id: string
  title: string
  description: string | null
  destination: string
  duration_days: number
  start_date: string
  end_date: string
  is_public: boolean
  view_count: number
  created_at: string
  updated_at: string
}

export interface SaveTripRequest {
  title: string
  description?: string
  destination: string
  itinerary_data: Itinerary
  is_public: boolean
}
```

### types/place.ts
```typescript
export interface Place {
  id: string
  name: string
  distance_meters?: number
  distance_text?: string
  categories: string[]
  rating: number | null
  stay_minutes: number
  price_range: number | null
  location: {
    lat: number
    lon: number
  }
  photo_url?: string
  is_favorite?: boolean
}

export interface PlaceDetail extends Place {
  description: string
  address: string
  phone: string
  website: string
  photo_urls: string[]
  hours: OperatingHours[]
}

export interface OperatingHours {
  weekday: number
  open_time: string
  close_time: string
}
```

### types/itinerary.ts
```typescript
export interface Itinerary {
  days: Day[]
}

export interface Day {
  day: number
  date: string
  visits: Visit[]
  accommodation?: Accommodation
}

export interface Visit {
  place_id: string
  name: string
  eta: string
  etd: string
  travel_minutes: number
  stay_minutes: number
}

export interface Accommodation {
  name: string
  address: string
  rating: number
  price: number
}
```

---

## 10. æ¨£å¼è¨­è¨ˆç³»çµ±

### 10.1 è‰²å½©ç³»çµ±

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
        },
        secondary: {
          500: '#8b5cf6',
          600: '#7c3aed',
        },
        success: '#10b981',
        warning: '#f59e0b',
        error: '#ef4444',
      }
    }
  }
}
```

### 10.2 é–“è·ç³»çµ±

```javascript
spacing: {
  xs: '0.5rem',    // 8px
  sm: '0.75rem',   // 12px
  md: '1rem',      // 16px
  lg: '1.5rem',    // 24px
  xl: '2rem',      // 32px
  '2xl': '3rem',   // 48px
}
```

### 10.3 å­—é«”ç³»çµ±

```javascript
fontSize: {
  xs: '0.75rem',     // 12px
  sm: '0.875rem',    // 14px
  base: '1rem',      // 16px
  lg: '1.125rem',    // 18px
  xl: '1.25rem',     // 20px
  '2xl': '1.5rem',   // 24px
  '3xl': '1.875rem', // 30px
  '4xl': '2.25rem',  // 36px
}
```

---

## 11. é–‹ç™¼æª¢æŸ¥æ¸…å–®

### âœ… å°ˆæ¡ˆåˆå§‹åŒ–
- [ ] å»ºç«‹ Next.js å°ˆæ¡ˆ
- [ ] å®‰è£æ‰€æœ‰ä¾è³´å¥—ä»¶
- [ ] è¨­å®š TypeScript
- [ ] è¨­å®š Tailwind CSS
- [ ] è¨­å®š ESLint + Prettier
- [ ] å»ºç«‹åŸºæœ¬è³‡æ–™å¤¾çµæ§‹

### âœ… é€šç”¨åŸºç¤
- [ ] API å®¢æˆ¶ç«¯è¨­å®š
- [ ] Token ç®¡ç†å·¥å…·
- [ ] éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- [ ] Toast é€šçŸ¥ç³»çµ±
- [ ] Loading ç‹€æ…‹è™•ç†

### âœ… èªè­‰æ¨¡çµ„
- [ ] ç™»å…¥é é¢
- [ ] è¨»å†Šé é¢
- [ ] authStore
- [ ] è·¯ç”±å®ˆè¡›
- [ ] è‡ªå‹•ç™»å…¥

### âœ… è¡Œç¨‹è¦åŠƒ
- [ ] è¦åŠƒè¡¨å–®é é¢
- [ ] çµæœå±•ç¤ºé é¢
- [ ] å°è©±ä¿®æ”¹åŠŸèƒ½
- [ ] åœ°åœ–æ•´åˆ
- [ ] å„²å­˜è¡Œç¨‹åŠŸèƒ½

### âœ… æœƒå“¡åŠŸèƒ½
- [ ] æˆ‘çš„è¡Œç¨‹é é¢
- [ ] è¡Œç¨‹è©³æƒ…é é¢
- [ ] åˆ†äº«åŠŸèƒ½
- [ ] å€‹äººè¨­å®šé é¢

### âœ… æ™¯é»åŠŸèƒ½
- [ ] é™„è¿‘æ™¯é»é é¢
- [ ] æ™¯é»åœ°åœ–
- [ ] æ”¶è—åŠŸèƒ½

### âœ… å„ªåŒ–
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] è¼‰å…¥æ•ˆèƒ½å„ªåŒ–
- [ ] åœ–ç‰‡å„ªåŒ–
- [ ] SEO å„ªåŒ–

---

## 12. ä¾è³´å¥—ä»¶æ¸…å–®

### package.json

```json
{
  "name": "travel-planner-frontend",
  "version": "2.0.0",
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    
    "axios": "^1.6.0",
    "zustand": "^4.4.0",
    "react-query": "^3.39.0",
    
    "react-hook-form": "^7.48.0",
    "zod": "^3.22.0",
    
    "leaflet": "^1.9.4",
    "react-leaflet": "^4.2.1",
    
    "date-fns": "^2.30.0",
    "react-datepicker": "^4.21.0",
    
    "lucide-react": "^0.294.0",
    "clsx": "^2.0.0",
    "tailwind-merge": "^2.0.0"
  },
  "devDependencies": {
    "typescript": "^5.0.0",
    "@types/react": "^18.2.0",
    "@types/node": "^20.0.0",
    "@types/leaflet": "^1.9.0",
    
    "tailwindcss": "^3.3.0",
    "postcss": "^8.4.0",
    "autoprefixer": "^10.4.0",
    
    "eslint": "^8.54.0",
    "eslint-config-next": "^14.0.0",
    "prettier": "^3.1.0",
    "prettier-plugin-tailwindcss": "^0.5.0"
  }
}
```

---

## 13. ç’°å¢ƒè®Šæ•¸

### .env.local

```bash
# API è¨­å®š
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_API_VERSION=v1

# Google Mapsï¼ˆå¯é¸ï¼‰
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-api-key

# OAuthï¼ˆå¯é¸ï¼‰
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your-google-client-id

# æ‡‰ç”¨è¨­å®š
NEXT_PUBLIC_APP_NAME=æ™ºæ…§æ—…éŠè¦åŠƒ
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## 14. é–‹ç™¼æ™‚ç¨‹ä¼°ç®—

| éšæ®µ | æ™‚é–“ | å…§å®¹ |
|------|------|------|
| Week 1 | 5 å¤© | å°ˆæ¡ˆè¨­å®š + é€šç”¨çµ„ä»¶ + API å®¢æˆ¶ç«¯ |
| Week 2 | 5 å¤© | èªè­‰é é¢ + ç‹€æ…‹ç®¡ç† |
| Week 3 | 5 å¤© | è¡Œç¨‹è¦åŠƒé é¢ï¼ˆé é¢1 + é é¢2ï¼‰ |
| Week 4 | 5 å¤© | æˆ‘çš„è¡Œç¨‹ + å€‹äººè¨­å®š |
| Week 5 | 5 å¤© | é™„è¿‘æ™¯é» + åœ°åœ–æ•´åˆ |
| Week 6 | 5 å¤© | æ”¶è—åŠŸèƒ½ + å„ªåŒ–æ¸¬è©¦ |

**ç¸½è¨ˆ**: ç´„ 6 é€±ï¼ˆ30 å€‹å·¥ä½œå¤©ï¼‰

---

## 15. è¨­è¨ˆè¦ç¯„

### éŸ¿æ‡‰å¼æ–·é»

```javascript
screens: {
  'sm': '640px',   // æ‰‹æ©Ÿæ©«å‘
  'md': '768px',   // å¹³æ¿
  'lg': '1024px',  // ç­†é›»
  'xl': '1280px',  // æ¡Œé¢
  '2xl': '1536px', // å¤§è¢å¹•
}
```

### UI è¨­è¨ˆåŸå‰‡

1. **ç°¡æ½”æ˜ç­**: é¿å…éå¤šè£é£¾ï¼Œçªå‡ºæ ¸å¿ƒåŠŸèƒ½
2. **ä¸€è‡´æ€§**: çµ±ä¸€çš„è‰²å½©ã€é–“è·ã€å­—é«”
3. **ç„¡éšœç¤™**: ARIA æ¨™ç±¤ã€éµç›¤å°èˆª
4. **å›é¥‹**: æ“ä½œå¿…æœ‰è¦–è¦ºå›é¥‹ï¼ˆLoadingã€Toastï¼‰
5. **éŸ¿æ‡‰å¼**: æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢å®Œç¾é©é…

---

## 16. é–‹ç™¼å·¥å…·å»ºè­°

### VS Code æ“´å……åŠŸèƒ½
- ESLint
- Prettier
- Tailwind CSS IntelliSense
- TypeScript Vue Plugin
- Auto Import
- GitLens

### Chrome æ“´å……åŠŸèƒ½
- React Developer Tools
- Redux DevTools
- Wappalyzer

---

## ç¸½çµ

### éœ€è¦é–‹ç™¼çš„å…§å®¹

âœ… **12 å€‹é é¢**
âœ… **40+ å€‹çµ„ä»¶**
âœ… **4 å€‹ API å®¢æˆ¶ç«¯æ¨¡çµ„**
âœ… **3 å€‹ç‹€æ…‹ç®¡ç† Store**
âœ… **å®Œæ•´çš„é¡å‹å®šç¾©**
âœ… **éŸ¿æ‡‰å¼è¨­è¨ˆ**

### å»ºè­°é–‹ç™¼é †åº

1. **Week 1**: åŸºç¤è¨­å®š + é€šç”¨çµ„ä»¶
2. **Week 2**: èªè­‰åŠŸèƒ½
3. **Week 3**: è¡Œç¨‹è¦åŠƒï¼ˆæ ¸å¿ƒï¼‰
4. **Week 4**: æœƒå“¡ä¸­å¿ƒ
5. **Week 5**: æ™¯é»æ¨è–¦
6. **Week 6**: å„ªåŒ–èˆ‡æ¸¬è©¦

---

**æº–å‚™é–‹å§‹å‰ç«¯é–‹ç™¼äº†å—ï¼Ÿ** ğŸš€

æˆ‘å¯ä»¥å¹«æ‚¨ï¼š
1. å»ºç«‹ Next.js å°ˆæ¡ˆæ¶æ§‹
2. è¨­å®š Tailwind CSS
3. å»ºç«‹é€šç”¨çµ„ä»¶
4. å¯¦ä½œ API å®¢æˆ¶ç«¯

éœ€è¦æˆ‘é–‹å§‹å—ï¼Ÿ
